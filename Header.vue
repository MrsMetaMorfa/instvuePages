<template lang="pug">
  header.p_header
    //p isMobile: {{ isMobile }}
    .header-mobile.wrapper.container.container--justifyed(v-if='isMobile')
      .left-icon
        router-link(to="/profile", v-if='pageRotation', title="User Rotation Level")
          svg(xmlns="http://www.w3.org/2000/svg", viewBox="0 0 512 512")
            // градиент энегрии
            linearGradient(id="gradient-vertical", x2="0", y2="1")

              stop(offset="0%", stop-color="white")
              stop(:offset="getEnergyData('percent') + '%'", stop-color="white")

              stop(:offset="getEnergyData('percent') + '%'", :stop-color="getEnergyData('color')")
              stop(offset="100%", :stop-color="getEnergyData('color')")

            path.dark(d="M435.2,193.7a47.6,47.6,0,0,0-43.9-28H323.1L403.9,30.2A20,20,0,0,0,386.7,0H197.1a20,20,0,0,0-17.8,10.9L80,206.8a69.9,69.9,0,0,0,62.2,101.6h69.9L142.6,450.9c-9.3,18.9-3.9,40.6,13.2,52.9a41.4,41.4,0,0,0,54.3-4.2,5.7,5.7,0,0,0,1.1-1.1l154.7-178a20,20,0,1,0-30.2-26.2l-154,177.3c-.6.5-1.3.8-2.6-.1s-1.1-2-.6-3L262,297.2a20,20,0,0,0-18-28.7H142.2a29.9,29.9,0,0,1-26.6-43.6l93.8-185H351.6L270.8,175.4a20,20,0,0,0,17.1,30.2H391.3a8.1,8.1,0,0,1,7.7,4.8,8.2,8.2,0,0,1-1.5,9.1,20.1,20.1,0,0,0,2.2,28.2,19.9,19.9,0,0,0,28.1-2.2A47.8,47.8,0,0,0,435.2,193.7Z")
            path(fill="url(#gradient-vertical)", d="M351.6,39.9H209.4l-93.8,185a29.9,29.9,0,0,0,26.6,43.6H244a20,20,0,0,1,18,28.7L178.5,468.5c-.5,1-.9,1.8.6,3s2,.6,2.6.1l154-177.3,61.8-74.8a8.2,8.2,0,0,0,1.5-9.1,8.1,8.1,0,0,0-7.7-4.8H287.9a20,20,0,0,1-17.1-30.2Z")
        router-link(to="/settings", v-if='pageProfile', title="Open Settings")
          svg(xmlns="http://www.w3.org/2000/svg", viewBox="0 0 512 512")
            path.dark(d="M256,140c-63.963,0-116,52.038-116,116s52.037,116,116,116c11.947,0,23.735-1.813,35.036-5.39c10.531-3.333,16.365-14.572,13.032-25.103c-3.332-10.531-14.574-16.366-25.103-13.033C271.573,330.814,263.847,332,256,332c-41.906,0-76-34.093-76-76s34.094-76,76-76s76,34.093,76,76c0,7.283-1.024,14.479-3.045,21.386c-3.101,10.602,2.98,21.709,13.582,24.81c10.604,3.101,21.709-2.98,24.811-13.582C370.435,278.058,372,267.084,372,256C372,192.038,319.963,140,256,140z")
            path.dark(d="M452,186.001h-10.071c-2.65,0-5.052-1.669-6.092-4.187l-0.178-0.432c-1.077-2.594-0.562-5.481,1.311-7.355l7.123-7.122c23.394-23.394,23.394-61.459,0-84.853L429.951,67.91c-11.333-11.333-26.401-17.574-42.427-17.574c-16.028,0-31.095,6.241-42.427,17.574l-7.121,7.121c-1.875,1.875-4.765,2.389-7.347,1.316l-0.377-0.156c-2.583-1.067-4.251-3.468-4.251-6.117V60c0-33.084-26.916-60-60-60h-20c-33.084,0-60,26.916-60,60v10.074c0,2.649-1.668,5.05-4.229,6.107l-0.391,0.162c-2.591,1.078-5.481,0.563-7.354-1.311l-7.122-7.122c-11.332-11.333-26.4-17.574-42.427-17.574c-16.027,0-31.094,6.241-42.427,17.574L67.909,82.05c-23.394,23.395-23.394,61.459,0.001,84.854l7.121,7.121c1.874,1.875,2.388,4.762,1.281,7.43l-0.121,0.292c-1.066,2.583-3.469,4.252-6.118,4.252H60c-33.084,0-60,26.916-60,60v20c0,33.084,26.916,60,60,60h10.072c2.65,0,5.051,1.669,6.092,4.187l0.178,0.432c1.077,2.594,0.562,5.481-1.312,7.355l-7.121,7.122c-11.333,11.333-17.574,26.4-17.574,42.427c0,16.026,6.241,31.093,17.573,42.426L82.05,444.09c11.333,11.333,26.401,17.574,42.427,17.574c16.028,0,31.095-6.241,42.427-17.574l7.121-7.121c1.873-1.875,4.764-2.389,7.347-1.316l0.377,0.156c2.583,1.067,4.251,3.468,4.251,6.117V452c0,33.084,26.916,60,60,60h20c33.084,0,60-26.916,60-60v-10.074c0-2.649,1.668-5.05,4.229-6.107l0.391-0.162c2.593-1.076,5.481-0.562,7.354,1.311l7.122,7.122c11.332,11.333,26.4,17.574,42.427,17.574c16.027,0,31.094-6.241,42.427-17.574l14.142-14.142c11.332-11.332,17.573-26.4,17.573-42.426c0-16.027-6.241-31.094-17.573-42.426l-7.122-7.122c-1.875-1.874-2.389-4.761-1.312-7.355l0.151-0.366c1.067-2.583,3.469-4.252,6.118-4.252H452c33.084,0,60-26.916,60-60v-20C512,212.917,485.084,186.001,452,186.001z M472,266c0,11.028-8.972,20-20,20h-10.073c-18.905,0-35.818,11.376-43.089,28.983l-0.13,0.314c-7.298,17.599-3.384,37.6,9.976,50.961l7.123,7.122c3.777,3.777,5.857,8.8,5.857,14.142c0,5.342-2.08,10.364-5.858,14.142l-14.141,14.142c-3.779,3.777-8.801,5.858-14.143,5.858c-5.343,0-10.365-2.08-14.142-5.858l-7.123-7.123c-13.368-13.365-33.381-17.276-50.991-9.962l-0.282,0.117C297.377,406.108,286,423.021,286,441.926V452c0,11.028-8.972,20-20,20h-20c-11.028,0-20-8.972-20-20v-10.074c0-18.905-11.377-35.818-29.005-43.097l-0.27-0.112c-5.89-2.447-12.047-3.636-18.137-3.636c-12.111,0-23.951,4.709-32.846,13.603l-7.122,7.123c-3.778,3.777-8.799,5.857-14.142,5.857c-5.342,0-10.365-2.081-14.142-5.858l-14.142-14.142c-3.778-3.778-5.858-8.8-5.858-14.142c0-5.342,2.08-10.365,5.858-14.142l7.122-7.122c13.361-13.361,17.275-33.362,9.976-50.961l-0.13-0.314C105.89,297.376,88.977,286,70.073,286H60c-11.028,0-20-8.972-20-20v-20c0-11.028,8.972-20,20-20h10.073c18.905,0,35.818-11.376,43.116-29.047l0.093-0.227c7.312-17.604,3.4-37.616-9.967-50.984l-7.121-7.121c-7.799-7.799-7.799-20.487,0-28.285l14.141-14.142c3.779-3.777,8.801-5.858,14.143-5.858c5.343,0,10.365,2.08,14.142,5.858l7.123,7.123c13.369,13.366,33.382,17.278,50.991,9.962l0.282-0.117C214.623,105.892,226,88.979,226,70.074V60c0-11.028,8.972-20,20-20h20c11.028,0,20,8.972,20,20v10.074c0,18.905,11.377,35.818,29.005,43.096l0.27,0.112c17.601,7.31,37.614,3.399,50.983-9.967l7.122-7.123c3.778-3.777,8.799-5.857,14.142-5.857c5.342,0,10.365,2.081,14.142,5.858l14.142,14.142c7.799,7.798,7.799,20.486,0.001,28.284l-7.123,7.123c-13.366,13.368-17.278,33.379-9.996,50.91l0.15,0.365C406.11,214.624,423.023,226,441.927,226H452c11.028,0,20,8.972,20,20V266z")
        router-link(to="/profile", v-if="pageSettings", title="Back to Profile")
          svg(xmlns="http://www.w3.org/2000/svg", viewBox="0 0 260 512")
            path.dark(d="M245,1l4.3,2.1A20,20,0,0,1,256.4,33c-1.5,1.9-3.4,3.7-5.1,5.5L50.4,239.8c-12,12.1-12,22.3,0,34.4L251.3,475.5c1.6,1.7,3.3,3.3,4.8,5.1a20.1,20.1,0,0,1-6.8,30.3L245,513h-9c-5-3.7-10.5-6.9-14.8-11.3Q120.9,401.7,20.9,301.3C.8,281.2-4.2,254.4,8,230.4a71.2,71.2,0,0,1,12.6-17.2Q122.3,110.9,224.3,9.1c3.3-3.3,7.8-5.4,11.7-8.1Z")

      h1.p_title {{ title }}

      button.btn.btn-notifications(type="button", v-show='showNotificationButton', @click="openNotificationModal")
        svg(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512")
          path(d="M466.768,380.91c-2.034-10.857-12.484-18.009-23.342-15.974c-10.856,2.035-18.009,12.485-15.975,23.341c1.51,8.055-2.031,13.795-4.275,16.5c-2.239,2.697-7.215,7.223-15.38,7.223H104.204c-8.165,0-13.141-4.525-15.38-7.223c-2.244-2.705-5.785-8.445-4.275-16.5c5.673-30.272,17.056-50.183,28.064-69.439c13.369-23.384,27.193-47.565,27.193-84.839v-30c0-63.067,51.263-115.072,114.302-115.987h3.781C320.715,88.925,371.807,140.93,371.807,204v30c0,31.723,10.377,53.552,20.104,71.523c3.62,6.688,10.5,10.484,17.606,10.484c3.215,0,6.477-0.777,9.502-2.415c9.715-5.257,13.327-17.395,8.069-27.108c-9.678-17.882-15.281-32.203-15.281-52.484v-30c0-41.161-15.943-80.037-44.894-109.466c-24.81-25.221-56.667-40.96-91.106-45.304V20c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v29.289c-76.458,9.92-136,75.892-136,154.711v30c0,26.647-9.673,43.566-21.919,64.986c-12.064,21.104-25.739,45.023-32.655,81.924c-3.301,17.616,1.369,35.626,12.813,49.414C69.479,444.1,86.304,452,104.204,452h91.989c0,33.084,26.916,60,60,60s60-26.916,60-60h91.603c17.9,0,34.725-7.9,46.158-21.676C465.398,416.537,470.068,398.526,466.768,380.91z M256.193,472c-11.028,0-20-8.972-20-20h40C276.193,463.028,267.222,472,256.193,472z")
        span(:class="this.$store.state.notifications.not_read_count !== '0' ? 'new-notification' : ''")
      a.btn.btn-exit(href="/auth/logout", type="button", v-if='showExitButton')
        svg(xmlns="http://www.w3.org/2000/svg", viewBox="0 0 512 512")
          path(d="M432,0H80C35.888,0,0,35.888,0,80v20c0,11.046,8.954,20,20,20s20-8.954,20-20V80c0-22.056,17.944-40,40-40h352c22.056,0,40,17.944,40,40v352c0,22.056-17.944,40-40,40H80c-22.056,0-40-17.944-40-40v-20c0-11.046-8.954-20-20-20s-20,8.954-20,20v20c0,44.112,35.888,80,80,80h352c44.112,0,80-35.888,80-80V80C512,35.888,476.112,0,432,0z")
          path(d="M45.991,270.278c-0.044-0.046-0.089-0.091-0.134-0.136c-7.798-7.798-7.798-20.486,0.041-28.325l74.284-74.716c7.788-7.833,7.751-20.496-0.082-28.284c-7.833-7.787-20.496-7.751-28.284,0.082l-74.243,74.675c-23.369,23.369-23.394,61.379-0.073,84.779l74.224,75.653c3.916,3.993,9.094,5.994,14.277,5.994c5.054,0,10.113-1.904,14.004-5.723c7.885-7.736,8.006-20.399,0.27-28.283L45.991,270.278z")
          path(d="M333,236H120c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h213c11.046,0,20-8.954,20-20S344.046,236,333,236z")

    .header-desktop.wrapper.container.container--justifyed(v-else)
      //Logo
      .logo
        h1 get<mark>foll<strong>.</strong></mark>
      //Navbar Container
      .navbar-container
      //Right Info
      .header_info.container
        .left-icon.container
          router-link(to="/profile", v-if="pageSettings", title="Back to Profile")
            svg(xmlns="http://www.w3.org/2000/svg", viewBox="0 0 260 512")
              path.dark(d="M245,1l4.3,2.1A20,20,0,0,1,256.4,33c-1.5,1.9-3.4,3.7-5.1,5.5L50.4,239.8c-12,12.1-12,22.3,0,34.4L251.3,475.5c1.6,1.7,3.3,3.3,4.8,5.1a20.1,20.1,0,0,1-6.8,30.3L245,513h-9c-5-3.7-10.5-6.9-14.8-11.3Q120.9,401.7,20.9,301.3C.8,281.2-4.2,254.4,8,230.4a71.2,71.2,0,0,1,12.6-17.2Q122.3,110.9,224.3,9.1c3.3-3.3,7.8-5.4,11.7-8.1Z")
          router-link(to="/settings", v-if="!pageSettings", title="Open Settings")
            svg(xmlns="http://www.w3.org/2000/svg", viewBox="0 0 512 512")
              path.dark(d="M256,140c-63.963,0-116,52.038-116,116s52.037,116,116,116c11.947,0,23.735-1.813,35.036-5.39c10.531-3.333,16.365-14.572,13.032-25.103c-3.332-10.531-14.574-16.366-25.103-13.033C271.573,330.814,263.847,332,256,332c-41.906,0-76-34.093-76-76s34.094-76,76-76s76,34.093,76,76c0,7.283-1.024,14.479-3.045,21.386c-3.101,10.602,2.98,21.709,13.582,24.81c10.604,3.101,21.709-2.98,24.811-13.582C370.435,278.058,372,267.084,372,256C372,192.038,319.963,140,256,140z")
              path.dark(d="M452,186.001h-10.071c-2.65,0-5.052-1.669-6.092-4.187l-0.178-0.432c-1.077-2.594-0.562-5.481,1.311-7.355l7.123-7.122c23.394-23.394,23.394-61.459,0-84.853L429.951,67.91c-11.333-11.333-26.401-17.574-42.427-17.574c-16.028,0-31.095,6.241-42.427,17.574l-7.121,7.121c-1.875,1.875-4.765,2.389-7.347,1.316l-0.377-0.156c-2.583-1.067-4.251-3.468-4.251-6.117V60c0-33.084-26.916-60-60-60h-20c-33.084,0-60,26.916-60,60v10.074c0,2.649-1.668,5.05-4.229,6.107l-0.391,0.162c-2.591,1.078-5.481,0.563-7.354-1.311l-7.122-7.122c-11.332-11.333-26.4-17.574-42.427-17.574c-16.027,0-31.094,6.241-42.427,17.574L67.909,82.05c-23.394,23.395-23.394,61.459,0.001,84.854l7.121,7.121c1.874,1.875,2.388,4.762,1.281,7.43l-0.121,0.292c-1.066,2.583-3.469,4.252-6.118,4.252H60c-33.084,0-60,26.916-60,60v20c0,33.084,26.916,60,60,60h10.072c2.65,0,5.051,1.669,6.092,4.187l0.178,0.432c1.077,2.594,0.562,5.481-1.312,7.355l-7.121,7.122c-11.333,11.333-17.574,26.4-17.574,42.427c0,16.026,6.241,31.093,17.573,42.426L82.05,444.09c11.333,11.333,26.401,17.574,42.427,17.574c16.028,0,31.095-6.241,42.427-17.574l7.121-7.121c1.873-1.875,4.764-2.389,7.347-1.316l0.377,0.156c2.583,1.067,4.251,3.468,4.251,6.117V452c0,33.084,26.916,60,60,60h20c33.084,0,60-26.916,60-60v-10.074c0-2.649,1.668-5.05,4.229-6.107l0.391-0.162c2.593-1.076,5.481-0.562,7.354,1.311l7.122,7.122c11.332,11.333,26.4,17.574,42.427,17.574c16.027,0,31.094-6.241,42.427-17.574l14.142-14.142c11.332-11.332,17.573-26.4,17.573-42.426c0-16.027-6.241-31.094-17.573-42.426l-7.122-7.122c-1.875-1.874-2.389-4.761-1.312-7.355l0.151-0.366c1.067-2.583,3.469-4.252,6.118-4.252H452c33.084,0,60-26.916,60-60v-20C512,212.917,485.084,186.001,452,186.001z M472,266c0,11.028-8.972,20-20,20h-10.073c-18.905,0-35.818,11.376-43.089,28.983l-0.13,0.314c-7.298,17.599-3.384,37.6,9.976,50.961l7.123,7.122c3.777,3.777,5.857,8.8,5.857,14.142c0,5.342-2.08,10.364-5.858,14.142l-14.141,14.142c-3.779,3.777-8.801,5.858-14.143,5.858c-5.343,0-10.365-2.08-14.142-5.858l-7.123-7.123c-13.368-13.365-33.381-17.276-50.991-9.962l-0.282,0.117C297.377,406.108,286,423.021,286,441.926V452c0,11.028-8.972,20-20,20h-20c-11.028,0-20-8.972-20-20v-10.074c0-18.905-11.377-35.818-29.005-43.097l-0.27-0.112c-5.89-2.447-12.047-3.636-18.137-3.636c-12.111,0-23.951,4.709-32.846,13.603l-7.122,7.123c-3.778,3.777-8.799,5.857-14.142,5.857c-5.342,0-10.365-2.081-14.142-5.858l-14.142-14.142c-3.778-3.778-5.858-8.8-5.858-14.142c0-5.342,2.08-10.365,5.858-14.142l7.122-7.122c13.361-13.361,17.275-33.362,9.976-50.961l-0.13-0.314C105.89,297.376,88.977,286,70.073,286H60c-11.028,0-20-8.972-20-20v-20c0-11.028,8.972-20,20-20h10.073c18.905,0,35.818-11.376,43.116-29.047l0.093-0.227c7.312-17.604,3.4-37.616-9.967-50.984l-7.121-7.121c-7.799-7.799-7.799-20.487,0-28.285l14.141-14.142c3.779-3.777,8.801-5.858,14.143-5.858c5.343,0,10.365,2.08,14.142,5.858l7.123,7.123c13.369,13.366,33.382,17.278,50.991,9.962l0.282-0.117C214.623,105.892,226,88.979,226,70.074V60c0-11.028,8.972-20,20-20h20c11.028,0,20,8.972,20,20v10.074c0,18.905,11.377,35.818,29.005,43.096l0.27,0.112c17.601,7.31,37.614,3.399,50.983-9.967l7.122-7.123c3.778-3.777,8.799-5.857,14.142-5.857c5.342,0,10.365,2.081,14.142,5.858l14.142,14.142c7.799,7.798,7.799,20.486,0.001,28.284l-7.123,7.123c-13.366,13.368-17.278,33.379-9.996,50.91l0.15,0.365C406.11,214.624,423.023,226,441.927,226H452c11.028,0,20,8.972,20,20V266z")
          router-link(to="/profile", title="User Rotation Level")
            svg(xmlns="http://www.w3.org/2000/svg", viewBox="0 0 512 512")
              // градиент энегрии
              linearGradient(id="gradient-vertical", x2="0", y2="1")
                stop(offset="0%", stop-color="white")
                stop(:offset="getEnergyData('percent') + '%'", stop-color="white")
                stop(:offset="getEnergyData('percent') + '%'", :stop-color="getEnergyData('color')")
                stop(offset="100%", :stop-color="getEnergyData('color')")
              path.dark(d="M435.2,193.7a47.6,47.6,0,0,0-43.9-28H323.1L403.9,30.2A20,20,0,0,0,386.7,0H197.1a20,20,0,0,0-17.8,10.9L80,206.8a69.9,69.9,0,0,0,62.2,101.6h69.9L142.6,450.9c-9.3,18.9-3.9,40.6,13.2,52.9a41.4,41.4,0,0,0,54.3-4.2,5.7,5.7,0,0,0,1.1-1.1l154.7-178a20,20,0,1,0-30.2-26.2l-154,177.3c-.6.5-1.3.8-2.6-.1s-1.1-2-.6-3L262,297.2a20,20,0,0,0-18-28.7H142.2a29.9,29.9,0,0,1-26.6-43.6l93.8-185H351.6L270.8,175.4a20,20,0,0,0,17.1,30.2H391.3a8.1,8.1,0,0,1,7.7,4.8,8.2,8.2,0,0,1-1.5,9.1,20.1,20.1,0,0,0,2.2,28.2,19.9,19.9,0,0,0,28.1-2.2A47.8,47.8,0,0,0,435.2,193.7Z")
              path(fill="url(#gradient-vertical)", d="M351.6,39.9H209.4l-93.8,185a29.9,29.9,0,0,0,26.6,43.6H244a20,20,0,0,1,18,28.7L178.5,468.5c-.5,1-.9,1.8.6,3s2,.6,2.6.1l154-177.3,61.8-74.8a8.2,8.2,0,0,0,1.5-9.1,8.1,8.1,0,0,0-7.7-4.8H287.9a20,20,0,0,1-17.1-30.2Z")
          button.btn.btn-notifications(type="button", @click="openNotificationModal")
            svg(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512")
              path(d="M466.768,380.91c-2.034-10.857-12.484-18.009-23.342-15.974c-10.856,2.035-18.009,12.485-15.975,23.341c1.51,8.055-2.031,13.795-4.275,16.5c-2.239,2.697-7.215,7.223-15.38,7.223H104.204c-8.165,0-13.141-4.525-15.38-7.223c-2.244-2.705-5.785-8.445-4.275-16.5c5.673-30.272,17.056-50.183,28.064-69.439c13.369-23.384,27.193-47.565,27.193-84.839v-30c0-63.067,51.263-115.072,114.302-115.987h3.781C320.715,88.925,371.807,140.93,371.807,204v30c0,31.723,10.377,53.552,20.104,71.523c3.62,6.688,10.5,10.484,17.606,10.484c3.215,0,6.477-0.777,9.502-2.415c9.715-5.257,13.327-17.395,8.069-27.108c-9.678-17.882-15.281-32.203-15.281-52.484v-30c0-41.161-15.943-80.037-44.894-109.466c-24.81-25.221-56.667-40.96-91.106-45.304V20c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v29.289c-76.458,9.92-136,75.892-136,154.711v30c0,26.647-9.673,43.566-21.919,64.986c-12.064,21.104-25.739,45.023-32.655,81.924c-3.301,17.616,1.369,35.626,12.813,49.414C69.479,444.1,86.304,452,104.204,452h91.989c0,33.084,26.916,60,60,60s60-26.916,60-60h91.603c17.9,0,34.725-7.9,46.158-21.676C465.398,416.537,470.068,398.526,466.768,380.91z M256.193,472c-11.028,0-20-8.972-20-20h40C276.193,463.028,267.222,472,256.193,472z")
            span(:class="this.$store.state.notifications.not_read_count !== '0' ? 'new-notification' : ''")

        h2.p_title.u-visually-hidden {{ title }}

        <!--a.btn.btn-exit(href="/auth/logout", type="button", v-if='showExitButton')-->
          <!--svg(xmlns="http://www.w3.org/2000/svg", viewBox="0 0 512 512")-->
            <!--path(d="M432,0H80C35.888,0,0,35.888,0,80v20c0,11.046,8.954,20,20,20s20-8.954,20-20V80c0-22.056,17.944-40,40-40h352c22.056,0,40,17.944,40,40v352c0,22.056-17.944,40-40,40H80c-22.056,0-40-17.944-40-40v-20c0-11.046-8.954-20-20-20s-20,8.954-20,20v20c0,44.112,35.888,80,80,80h352c44.112,0,80-35.888,80-80V80C512,35.888,476.112,0,432,0z")-->
            <!--path(d="M45.991,270.278c-0.044-0.046-0.089-0.091-0.134-0.136c-7.798-7.798-7.798-20.486,0.041-28.325l74.284-74.716c7.788-7.833,7.751-20.496-0.082-28.284c-7.833-7.787-20.496-7.751-28.284,0.082l-74.243,74.675c-23.369,23.369-23.394,61.379-0.073,84.779l74.224,75.653c3.916,3.993,9.094,5.994,14.277,5.994c5.054,0,10.113-1.904,14.004-5.723c7.885-7.736,8.006-20.399,0.27-28.283L45.991,270.278z")-->
            <!--path(d="M333,236H120c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h213c11.046,0,20-8.954,20-20S344.046,236,333,236z")-->
        .header_avatar
          img(:src="this.$store.state.user.is_linked_instagram ? this.$store.state.user.instagram.avatar : ''", alt="avatar")
</template>

<script>
export default {
  name: 'Header',
  props: {
    title: String,
    pageRotation: {
      type: Boolean,
      default: false
    },
    pageProfile: {
      type: Boolean,
      default: false
    },
    pageSettings: {
      type: Boolean,
      default: false
    },
    showNotificationButton: {
      type: Boolean,
      default: true
    },
    showExitButton: {
      type: Boolean,
      default: false
    }
  },
  data: function () {
    return {
      windowWidth: window.innerWidth,
      energy : this.$store.state.user.activity_points,
      mean_energy: this.$store.state.user.mean_users_points
    }
  },
  computed: {
    isMobile: function () {
      if (this.windowWidth >= 920) {
        return false
      } else {
        return true
      }
    }
  },
  methods: {
    // информация о проценте
    getEnergyData: function (type) {

      if (!this.$store.state.user) return '';

      const max_energy = 1000;
      const min_energy = 0;

      const colors = {
        1 : 'red',
        2 : 'orange',
        3 : '#46d1bf'
      }

      // на сколько процентов отклонение от среднее энергии
      let percent = Math.floor(this.energy * 100 / this.mean_energy) - 100;


      if (type === 'percent') {
        // процент заливки
        percent = 50 + percent;

        // не меньше 30 и не больше 100
        percent = Math.max(percent, 30);
        percent = Math.min(percent, 100);

        return 100 - percent;
      }

      if (type === 'color') {
        if (percent > 20) {
          return colors[3];
        }

        if (percent > -20) {
          return colors[2];
        }

        return colors[1];
      }

    },
    openNotificationModal: function () {
      this.$emit('notificationModal', true)
    }
  },
  mounted () {
    window.onresize = () => {
      setTimeout(() => {
        this.windowWidth = window.innerWidth;
      }, 300);
      console.log('windowWidth: ', this.windowWidth)
    }
  }
}
</script>

<style scoped lang="sass">
  @import "../../sass/settings.scss"
  .p_header
    position: fixed
    top: 0
    left: 0
    right: 0
    width: 100%
    background: $white
    color: $dark
    z-index: 100
    .wrapper
      padding: 10px 15px
      display: flex
      align-items: center
    .btn
      font-size: 0
      line-height: 0
      height: 15px
      width: auto
      &.btn-notifications
        min-width: 0
        position: relative
        svg
          height: 100%
          path
            fill: $dark
        .new-notification
          display: block
          border: 1px solid $white
          border-radius: 50%
          width: 8px
          height: 8px
          background: $error
          position: absolute
          top: 2px
          right: -1px
      &.btn-exit
        min-width: 0
        position: relative
        svg
          height: 100%
          path
            fill: $dark

  .left-icon
    height: 15px
    width: auto
    a
      display: block
      height: 100%
      width: auto
    svg
      height: 100%
      width: auto
      path.dark
        fill: $dark

  .p_title
    text-align: center
    font-size: $text-large
    line-height: 1


  @media screen and (min-width: 920px)
    .header-desktop
      height: auto
      width: 96%
      max-width: 1170px
      padding-top: 0!important
      padding-bottom: 0!important
      .logo
        width: 25%
        h1
          font-family: "Museo Cyrl", sans-serif
          font-weight: 900
          color: #3a4859
          font-size: 34px
          mark
            background: transparent
            color: #46d0c0
            font-weight: 100
            strong
              font-weight: 900
      .navbar-container
        width: 50%
        height: 83px
      .header_info
        width: 25%
        align-items: center
        justify-content: flex-end
        .header_avatar
          border-radius: 50%
          width: 46px
          min-width: 46px
          height: 46px
          border: 3px solid #46d1bf
          overflow: hidden
          margin: 0 0 0 25px
          img
            width: auto
            max-width: auto
            height: 100%
            object-fit: cover
        .left-icon
          height: 23px
          a
            margin: 0 0 0 25px
          .btn-notifications
            height: 100%
            margin: 0 0 0 25px
            .new-notification
              border: 3px solid white
              width: 14px
              height: 14px
              right: -2px
  /**/
</style>
